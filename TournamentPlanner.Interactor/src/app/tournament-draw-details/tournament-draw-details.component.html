<div class="container">
  <mat-card class="mat-card">
    <div class="btn-div">
      <button mat-icon-button class="back-btn" (click)="emitDrawTabChangeEvent()">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
    <mat-card-header class="mat-card-header">
      <mat-card-title class="mat-card-title">{{this.matchType()?.name}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="center">
        <mat-tab label="Details">
          <ng-container *ngTemplateOutlet="detailsTab"></ng-container>
        </mat-tab>
        <mat-tab label="Matches">
          <ng-container *ngTemplateOutlet="matchesTab"></ng-container>
        </mat-tab>
      </mat-tab-group>

    </mat-card-content>
  </mat-card>
</div>

<ng-template #detailsTab>
  @if (this.players() != undefined) {
  @if (this.matchType()?.type == matchTypeTypes.Group) {
  <app-group-matchtype-details [players]="this.players()" [matches]="this.matches()" [gameType]="this.gameType"
    [matchTypeId]="this.matchType()?.id"></app-group-matchtype-details>
  }
  @else if (this.matchType()?.type == matchTypeTypes.KnockOut) {
  <app-knockout-matchtype-details></app-knockout-matchtype-details>
  }
  }
</ng-template>

<ng-template #matchesTab>
  @for (round of this.rounds(); track round.id) {
  <mat-grid-list cols="2" rowHeight="2:1">
    @for (match of round.matches; track match.id) {
    <mat-grid-tile>
      <app-tournament-match [match]="this.getMatchModel(match, round)"
        [gameType]="this.gameType"></app-tournament-match>
    </mat-grid-tile>
    }
  </mat-grid-list>
  }
</ng-template>